FROM node:18

WORKDIR /usr/src/app

COPY package*.json ./
RUN npm install

COPY . .

ARG DEMO_FRONTEND_PORT
ENV DEMO_FRONTEND_PORT=${DEMO_FRONTEND_PORT}

ARG DEMO_BACKEND_PORT
ENV DEMO_BACKEND_PORT=${DEMO_BACKEND_PORT}

ARG INDEXER_PORT
ENV INDEXER_PORT=${INDEXER_PORT}

EXPOSE ${DEMO_FRONTEND_PORT}

CMD ["npm", "run", "dev", "--", "--host", "0.0.0.0"]